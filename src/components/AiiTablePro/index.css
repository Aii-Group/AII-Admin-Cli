@tailwind base;
@tailwind components;
@tailwind utilities;

/* Z-Index 层级定义 */
:root {
    --z-table-base: 1;
    --z-table-row-border: 2;
    --z-table-sticky-shadow: 3;
    --z-table-header: 90;
    --z-table-batch-operation: 90;
    --z-table-loading-mask: 100;
    --z-table-loading-spin: 101;
}

@layer {
    .aii-table-pro {
        @apply flex flex-col bg-light-colorBgContainer dark:bg-dark-colorBgContainer;
        position: relative;
        height: 100%;
        z-index: var(--z-table-base);
    }

    /* 表格容器样式 */
    .aii-table-container {
        position: relative;
        transition: all 0.3s linear;
        height: 100%;
    }

    /* 加载状态蒙版样式 */
    .aii-table-container::before {
        @apply bg-[#ffffff8a] dark:bg-[#0000002a];
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        backdrop-filter: blur(1px);
        z-index: var(--z-table-loading-mask);
        display: none;
        align-items: center;
        justify-content: center;
    }

    .aii-table-container.loading::before {
        display: flex;
    }

    /* 加载 Spin 组件样式 */
    .aii-table-loading-spin {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: var(--z-table-loading-spin);
    }

    .aii-table-empty {
        @apply p-24 !border-b border-light-colorBorderSecondary dark:!border-dark-colorBorderSecondary;
    }

    /* 工具栏样式 */
    .aii-table-toolbar {
        @apply flex items-center justify-between mb-10;
    }

    .aii-table-toolbar-left,
    .aii-table-toolbar-right {
        @apply flex items-center gap-10;
    }

    /* 批量操作行样式 */
    .aii-table-batch-operation-row-container {
        @apply bg-light-colorBgContainer dark:bg-dark-colorBgContainer;
        z-index: var(--z-table-batch-operation);
    }
    .aii-table-batch-operation-row {
        @apply flex justify-between box-border items-center  rounded-borderRadiusLG bg-light-colorPrimaryBg text-light-colorPrimary dark:bg-dark-colorPrimaryBg dark:text-dark-colorPrimary;
    }

    .aii-table-batch-info {
        @apply font-bold text-light-colorPrimary dark:text-dark-colorPrimary;
    }

    .aii-table-batch-actions {
        display: flex;
        gap: 8px;
    }

    /* 表头样式 */
    .aii-table-header {
        @apply relative overflow-x-hidden rounded-tr-borderRadiusLG rounded-tl-borderRadiusLG bg-[#fafafa] dark:bg-[#1D1D1D];
        z-index: var(--z-table-header);
    }

    /* 表头粘性样式 */
    .aii-table-header.sticky {
        @apply top-0 bg-[#fafafa] dark:bg-[#1D1D1D];
        position: sticky;
        z-index: var(--z-table-header);
    }

    .aii-table-header-row {
        display: grid;
        grid-template-columns: var(--grid-template-columns, repeat(var(--columns), 1fr));
        background-color: inherit;
    }

    .aii-table-header-cell {
        @apply flex items-center relative h-55 px-16 py-12 font-bold shrink-0 box-border text-light-colorText dark:text-dark-colorText border-b border-light-colorBorderSecondary dark:border-dark-colorBorderSecondary;
    }

    .aii-table-cell {
        @apply relative flex items-center p-16 box-border text-light-colorText dark:text-dark-colorText !border-b border-light-colorBorderSecondary dark:!border-dark-colorBorderSecondary;
    }

    .aii-table-header-cell::after {
        @apply bg-light-colorBorderSecondary dark:bg-dark-colorBorderSecondary;
        position: absolute;
        top: 50%;
        inset-inline-end: 0;
        width: 1px;
        height: 1.6em;
        transform: translateY(-50%);
        transition: background-color 0.3s;
        content: '';
    }

    .aii-table-header-cell:last-child::after {
        @apply hidden;
    }

    /* Selection 列样式 */
    .aii-table-header-cell[data-column-id='select'] {
        width: 48px !important;
        min-width: 48px !important;
        max-width: 48px !important;
        flex: none !important;
    }

    .aii-table-header-cell[data-column-id='select']::after {
        display: none;
    }

    .aii-table-cell[data-column-id='select'] {
        width: 48px !important;
        min-width: 48px !important;
        max-width: 48px !important;
        flex: none !important;
    }

    .aii-table-header-cell.sortable {
        cursor: pointer;
    }

    .aii-table-header-content {
        display: flex;
        align-items: center;
        gap: 4px;
        width: 100%;
    }

    .aii-table-sort-icons {
        display: flex;
        flex-direction: column;
        line-height: 1;
        flex-shrink: 0;
    }

    .aii-table-sort-icons .anticon {
        font-size: 10px;
        color: #bfbfbf;
        height: 6px;
    }

    .aii-table-sort-icons .anticon.active {
        @apply text-light-colorPrimary dark:text-dark-colorPrimary;
    }

    .aii-table-filter-icon {
        margin-left: 4px;
        color: #bfbfbf;
        font-size: 12px;
    }

    /* 表格主体样式 */
    .aii-table-body {
        @apply bg-light-colorBgContainer dark:bg-dark-colorBgContainer;
        display: flex;
        flex-direction: column;
        height: 100%;
        position: relative;
        overflow-x: scroll;
    }

    .aii-table-row {
        display: grid;
        grid-template-columns: var(--grid-template-columns, repeat(var(--columns), 1fr));
        transition: background-color 0.2s;
        width: 100%;
        background-color: inherit;
        position: relative;
    }

    .aii-table-row.no-selection {
        grid-template-columns: var(--grid-template-columns, repeat(var(--columns), 1fr));
    }

    .aii-table-row:hover > .aii-table-cell {
        @apply !bg-[#fafafa] dark:!bg-[#1d1d1d];
    }

    .aii-table-row.selected > .aii-table-cell {
        @apply !bg-light-colorPrimaryBg dark:!bg-dark-colorPrimaryBg;
    }

    .aii-table-row.selected:hover > .aii-table-cell {
        @apply !bg-light-colorPrimaryBgHover dark:!bg-dark-colorPrimaryBgHover;
    }

    /* 工具栏样式 */
    .aii-table-toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .toolbar-left {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .toolbar-right {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    /* 分页样式 */
    .aii-table-pagination {
        @apply flex justify-between items-end mt-10;
    }

    .pagination-info {
        @apply flex items-center gap-8 cursor-pointer text-light-colorText dark:text-dark-colorText;
    }

    .pagination-dropdown {
        @apply flex items-center gap-4;
    }

    .pagination-controls {
        @apply flex items-center gap-4;
    }

    /* Ellipsis 样式 */
    .aii-table-cell-ellipsis {
        @apply overflow-hidden text-ellipsis whitespace-nowrap w-full;
        max-width: 100%;
        display: block;
    }

    .aii-table-cell:has(.aii-table-cell-ellipsis) {
        @apply overflow-hidden;
        min-width: 0;
    }

    /* 右侧固定列阴影样式 */
    .sticky-right::after {
        box-shadow: var(--sticky-box-shadow);
        position: absolute;
        top: 0;
        bottom: -1px;
        left: -10px;
        width: 10px;
        transition: box-shadow 0.3s;
        content: '';
        pointer-events: none;
        z-index: var(--z-table-sticky-shadow);
    }
    .dark .sticky-right::after {
        box-shadow: var(--sticky-dark-box-shadow);
    }

    /* 左侧固定列阴影样式 */
    .sticky-left::after {
        box-shadow: var(--sticky-box-shadow);
        position: absolute;
        top: 0;
        bottom: -1px;
        right: -10px;
        width: 10px;
        transition: box-shadow 0.3s;
        content: '';
        pointer-events: none;
        z-index: var(--z-table-sticky-shadow);
    }
    .dark .sticky-left::after {
        box-shadow: var(--sticky-dark-box-shadow);
    }

    .sticky-header-left::before {
        box-shadow: var(--sticky-box-shadow);
        position: absolute;
        top: 0;
        bottom: -1px;
        right: -10px;
        width: 10px;
        transition: box-shadow 0.3s;
        content: '';
        pointer-events: none;
        z-index: var(--z-table-sticky-shadow);
    }
    .dark .sticky-header-left::before {
        box-shadow: var(--sticky-dark-box-shadow);
    }

    .sticky-header-right::before {
        box-shadow: var(--sticky-box-shadow);
        position: absolute;
        top: 0;
        bottom: -1px;
        left: -10px;
        width: 10px;
        transition: box-shadow 0.3s;
        content: '';
        pointer-events: none;
        z-index: var(--z-table-sticky-shadow);
    }
    .dark .sticky-header-right::before {
        box-shadow: var(--sticky-dark-box-shadow);
    }
}
